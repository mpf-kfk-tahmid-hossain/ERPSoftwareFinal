{% extends 'base.html' %}
{% load static %}
{% load json_script %}
{% block title %}New Purchase Requisition{% endblock %}
{% block content %}
<h2>New Purchase Requisition</h2>
<form method="post" class="needs-validation" novalidate>
  {% csrf_token %}
  <div class="mb-3">
    <label class="form-label" for="id_number">Number</label>
    <input type="text" name="number" id="id_number" class="form-control" required>
  </div>
  <div id="line-items"></div>
  <button type="button" class="btn btn-secondary mb-3" id="add-line">Add Line</button>
  <div class="mb-3">
    <label class="form-label" for="id_just">Justification</label>
    <textarea name="justification" id="id_just" class="form-control"></textarea>
  </div>
  <input type="hidden" name="items_json" id="items_json">
  {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
  <button type="submit" class="btn btn-success">Submit</button>
</form>
{% endblock %}
{% block extra_js %}
<script src="/static/js/requisition_form.js"></script>
<script>
const products = JSON.parse('{{ products|json_script:"prod" }}');
</script>
{% endblock %}
